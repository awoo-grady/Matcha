#!/bin/bash -l
#
# .prefix
#
# Matcha 1.0, Created by gradyzhuo, enoch_lee.
# Copyright Â© 2017, Matcha Inc. All rights reserved.
#

declare -f @exec

function @exec() {
  PARAMS="$@"
  command="$1"
  declare -i cmd_len=${#command}+2
  declare -i params_len=${#PARAMS}
  PARAMS=$( echo $PARAMS | cut -c $cmd_len-$params_len )

  COMMAND_BASE="$MATCHA_BUILDER_BASE/command/$command"
  pushd "$COMMAND_BASE" >> /dev/null
  source main $PARAMS
  popd >> /dev/null
}
